(()=>{"use strict";var e,t,n,o,c,r,l,a,s,i,u,h,g,d,f,y,m,w,S,b=Object.freeze({gain:.5,numSamples:256}),v=(new Uint8Array(b.numSamples/2),function(e){t.src=e}),q=function(e,t,n,o){return void 0===o&&(o=1),"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(o,")")},k=function(){function e(){this.length=10}return e.prototype.setStartPoint=function(e,t){this.x=1*e/5,this.y=2*t/5},e.prototype.update=function(e,t){e*=.5,this.length=10+e,0==e&&(this.length=0),this.draw(t)},e.prototype.draw=function(e){a.save(),a.beginPath(),a.fillStyle=e,a.moveTo(this.x,this.y+this.length),a.lineTo(this.x-this.length,this.y),a.lineTo(this.x+this.length,this.y),a.fill(),a.restore()},e}(),p=function(){function e(){this.length=10}return e.prototype.setStartPoint=function(e,t){this.x=4*e/5,this.y=1*t/2},e.prototype.update=function(e,t){this.length=e,this.draw(t)},e.prototype.draw=function(e){a.save(),a.beginPath(),a.fillStyle=e,a.rect(this.x-this.length/2,this.y-this.length/2,this.length,this.length),a.fill(),a.restore()},e}(),T=new k,P=new p,A={showGradient:null,showBars:null,showCircles:null,showTriangles:null,showSquares:null,showNoise:null,showInvert:null,showEmboss:null,showLowshelf:null,showHighshelf:null,selectFrequency:null},C=function(){setTimeout(C),function(e){if(e.selectFrequency?h.getByteFrequencyData(g):h.getByteTimeDomainData(g),a.save(),a.fillStyle="black",a.globalAlpha=.1,a.fillRect(0,0,s,i),a.restore(),e.showGradient&&(a.save(),a.fillStyle=u,a.globalAlpha=.3,a.fillRect(0,0,s,i),a.restore()),e.showTriangles)for(var t=0;t<g.length;t++){var n="rgba(".concat(t/10,", ").concat(t/5,", ").concat(t,", 1)");T.update(g[t],n)}if(e.showSquares)for(t=0;t<g.length;t++)n="rgba(".concat(t/10,", ").concat(t/5,", ").concat(t,", 1)"),P.update(g[t],n);if(e.showLowshelf){var o=1,c=5,r=(s-g.length*o-2*c)/g.length,l=400,d=100;for(a.save(),a.fillStyle="rgba(227, 174, 50,0.50)",a.strokeStyle="rgba(0,0,0,0.50)",t=0;t<g.length;t++)a.fillRect(c+t*(r+o),d+256-g[t],r,l),a.strokeRect(c+t*(r+o),d+256-g[t],r,l);a.restore()}if(e.showHighshelf){for(o=6,c=3,r=(s-g.length*o-2*c)/g.length,l=400,d=-600,a.save(),a.fillStyle="rgba(255,255,255,1)",a.strokeStyle="rgba(255,255,255,0.50)",t=0;t<g.length;t++)a.fillRect(c+t*(r+o),d+256-g[t],r,l),a.strokeRect(c+t*(r+o),d+256-g[t],r,l);a.restore()}if(e.showBars){for(o=4,c=5,r=(s-g.length*o-2*c)/g.length,l=200,d=100,a.save(),a.fillStyle="rgba(255,255,255,0.50)",a.strokeStyle="rgba(0,0,0,0.50)",t=0;t<g.length;t++)a.fillRect(c+t*(r+o),d+256-g[t],r,l),a.strokeRect(c+t*(r+o),d+256-g[t],r,l);a.restore()}if(e.showCircles){var f=i/4;for(a.save(),a.globalAlpha=.5,t=0;t<g.length;t++){var y=g[t]/255,m=y*f;a.beginPath(),a.fillStyle=q(255,111,111,.34-y/3),a.arc(s/2,i/2,m,0,2*Math.PI,!1),a.fill(),a.closePath(),a.beginPath(),a.fillStyle=q(0,0,255,.1-y/10),a.arc(s/2,i/2,1.5*m,0,2*Math.PI,!1),a.fill(),a.closePath(),a.beginPath(),a.fillStyle=q(200,200,0,.5-y/5),a.arc(s/2,i/2,.5*m,0,2*Math.PI,!1),a.fill(),a.closePath(),a.restore()}a.restore()}var w=a.getImageData(0,0,s,i),S=w.data,b=S.length,v=w.width;if(e.showEmboss)for(t=0;t<b;t++)t%4!=3&&(S[t]=127+2*S[t]-S[t+4]-S[t+4*v]);for(t=0;t<b;t+=4)if(e.showNoise&&Math.random()<.05&&(S[t]=S[t+1]=S[t+2]=0,S[t]=255,S[t+1]=255,S[t+2]=205),e.showInvert){var k=S[t],p=S[t+1],A=S[t+2];S[t]=255-k,S[t+1]=255-p,S[t+2]=255-A}a.putImageData(w,0,0)}(A)};console.log("init called"),console.log("Testing utils.getRandomColor() import: ".concat("rgba(".concat((S=function(){return 185*Math.random()+35})(),",").concat(S(),",").concat(S(),",1)"))),m=function(){var m,w;m=d[0],w=window.AudioContext,e=new w,t=new Audio,v(m),n=e.createMediaElementSource(t),(o=e.createAnalyser()).fftSize=b.numSamples,(c=e.createGain()).gain.value=b.gain,(r=e.createBiquadFilter()).type="highshelf",(l=e.createBiquadFilter()).type="lowshelf",n.connect(r),r.connect(l),l.connect(o),o.connect(c),c.connect(e.destination);var S=document.querySelector("canvas");(function(n){document.querySelector("#fs-button").onclick=function(e){var t;console.log("goFullscreen() called"),(t=n).requestFullscreen&&t.requestFullscreen()};var o=document.querySelector("#play-button");o.onclick=function(n){"suspended"==e.state&&e.resume(),console.log("audioCtx.state after = ".concat(e.state)),"no"==o.dataset.playing?(t.play(),o.dataset.playing="yes"):(t.pause(),o.dataset.playing="no")};var a=document.querySelector("#volume-slider"),s=document.querySelector("#volume-label");a.oninput=function(e){var t;t=Number(e.target.value),c.gain.value=t,s.innerHTML=Math.round(Number(e.target.value)/2*100).toString()},a.dispatchEvent(new Event("input")),document.querySelector("#track-select").onchange=function(e){v(e.target.value),"yes"==o.dataset.playing&&o.dispatchEvent(new MouseEvent("click"))},document.querySelector("#visualizer-select").onchange=function(e){A.selectFrequency=!A.selectFrequency},document.querySelector("#cb-bars").onclick=function(e){A.showBars=e.target.checked},document.querySelector("#cb-circles").onclick=function(e){A.showCircles=e.target.checked},document.querySelector("#cb-triangles").onclick=function(e){A.showTriangles=e.target.checked},document.querySelector("#cb-squares").onclick=function(e){A.showSquares=e.target.checked},document.querySelector("#cb-gradient").onclick=function(e){A.showGradient=e.target.checked},document.querySelector("#cb-noise").onclick=function(e){A.showNoise=e.target.checked},document.querySelector("#cb-emboss").onclick=function(e){A.showEmboss=e.target.checked},document.querySelector("#cb-invert").onclick=function(e){A.showInvert=e.target.checked},document.querySelector("#cb-lowshelf").onclick=function(t){A.showLowshelf=t.target.checked,A.showLowshelf?(l.frequency.setValueAtTime(1e3,e.currentTime),l.gain.setValueAtTime(15,e.currentTime)):l.gain.setValueAtTime(0,e.currentTime)},document.querySelector("#cb-highshelf").onclick=function(t){A.showHighshelf=t.target.checked,A.showHighshelf?(r.frequency.setValueAtTime(1e3,e.currentTime),r.gain.setValueAtTime(-25,e.currentTime)):r.gain.setValueAtTime(0,e.currentTime)};var i=document.querySelector("#burger"),u=document.querySelector("#nav-links");null==i||i.addEventListener("click",(function(){null==u||u.classList.toggle("is-active")}))})(S),function(e,t){a=e.getContext("2d"),s=e.width,i=e.height,u=function(e,t,n,o,c,r){for(var l=e.createLinearGradient(0,0,0,c),a=0,s=[{percent:.8,color:"black"},{percent:1,color:"white"}];a<s.length;a++){var i=s[a];l.addColorStop(i.percent,i.color)}return l}(a,0,0,0,i),h=t,g=new Uint8Array(h.fftSize/2),T.setStartPoint(s,i),P.setStartPoint(s,i)}(S,o),document.querySelector("#track-select").value=d[0],document.querySelector("#visualizer-select").value=f,document.querySelector("title").textContent=y,C()},(w=new XMLHttpRequest).onload=function(e){console.log("In onload - HTTP Status Code = ".concat(e.target.status));var t=JSON.parse(w.responseText);d=t["Track Locations"],t.Tracks,t["Params Truth Table"].forEach((function(e){var t=e.split(":"),n=t[0],o=t[1],c=n.trim(),r=o.trim();A[c]="true"===r||"false"===r?"true"===r:r})),f=t["Default Visualizer State"],y=t.Title,document.querySelector("#cb-noise").checked=A.showNoise,document.querySelector("#cb-bars").checked=A.showBars,document.querySelector("#cb-circles").checked=A.showCircles,document.querySelector("#cb-triangles").checked=A.showTriangles,document.querySelector("#cb-squares").checked=A.showSquares,document.querySelector("#cb-gradient").checked=A.showGradient,document.querySelector("#cb-invert").checked=A.showInvert,document.querySelector("#cb-emboss").checked=A.showEmboss,document.querySelector("#cb-lowshelf").checked=A.showLowshelf,document.querySelector("#cb-highshelf").checked=A.showHighshelf,m()},w.onerror=function(e){return console.log("In onerror - HTTP Status Code = ".concat(e.target.status))},w.open("GET","data/av-data.json"),w.send()})();
//# sourceMappingURL=bundle.js.map