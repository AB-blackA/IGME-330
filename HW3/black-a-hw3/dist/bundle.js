(()=>{"use strict";var e,t,o,n,r,c,l,a,s,i,u={938:(e,t)=>{var o,n,r,c,l,a,s;Object.defineProperty(t,"__esModule",{value:!0}),t.toggleLowshelf=t.toggleHighshelf=t.analyserNode=t.setVolume=t.loadSoundFile=t.pauseCurrentSound=t.playCurrentSound=t.setupWebaudio=t.audioCtx=void 0;var i=Object.freeze({gain:.5,numSamples:256});new Uint8Array(i.numSamples/2),t.setupWebaudio=function(e){var h=window.AudioContext;t.audioCtx=o=new h,n=new Audio,u(e),r=o.createMediaElementSource(n),t.analyserNode=c=o.createAnalyser(),c.fftSize=i.numSamples,(l=o.createGain()).gain.value=i.gain,(a=o.createBiquadFilter()).type="highshelf",(s=o.createBiquadFilter()).type="lowshelf",r.connect(a),a.connect(s),s.connect(c),c.connect(l),l.connect(o.destination)};var u=function(e){n.src=e};t.loadSoundFile=u,t.playCurrentSound=function(){n.play()},t.pauseCurrentSound=function(){n.pause()},t.setVolume=function(e){e=Number(e),l.gain.value=e},t.toggleHighshelf=function(e){e?(a.frequency.setValueAtTime(1e3,o.currentTime),a.gain.setValueAtTime(-25,o.currentTime)):a.gain.setValueAtTime(0,o.currentTime)},t.toggleLowshelf=function(e){e?(s.frequency.setValueAtTime(1e3,o.currentTime),s.gain.setValueAtTime(15,o.currentTime)):s.gain.setValueAtTime(0,o.currentTime)}},250:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.draw=t.setupCanvas=void 0;var n,r,c,l,a,s,i=o(185),u=function(){function e(){this.length=10}return e.prototype.setStartPoint=function(e,t){this.x=1*e/5,this.y=2*t/5},e.prototype.update=function(e,t){e*=.5,this.length=10+e,0==e&&(this.length=0),this.draw(t)},e.prototype.draw=function(e){n.save(),n.beginPath(),n.fillStyle=e,n.moveTo(this.x,this.y+this.length),n.lineTo(this.x-this.length,this.y),n.lineTo(this.x+this.length,this.y),n.fill(),n.restore()},e}(),h=function(){function e(){this.length=10}return e.prototype.setStartPoint=function(e,t){this.x=4*e/5,this.y=1*t/2},e.prototype.update=function(e,t){this.length=e,this.draw(t)},e.prototype.draw=function(e){n.save(),n.beginPath(),n.fillStyle=e,n.rect(this.x-this.length/2,this.y-this.length/2,this.length,this.length),n.fill(),n.restore()},e}(),d=new u,g=new h;t.setupCanvas=function(e,t){n=e.getContext("2d"),r=e.width,c=e.height,l=i.getLinearGradient(n,0,0,0,c,[{percent:.8,color:"black"},{percent:1,color:"white"}]),a=t,s=new Uint8Array(a.fftSize/2),d.setStartPoint(r,c),g.setStartPoint(r,c)},t.draw=function(e){if(e.selectFrequency?a.getByteFrequencyData(s):a.getByteTimeDomainData(s),n.save(),n.fillStyle="black",n.globalAlpha=.1,n.fillRect(0,0,r,c),n.restore(),e.showGradient&&(n.save(),n.fillStyle=l,n.globalAlpha=.3,n.fillRect(0,0,r,c),n.restore()),e.showTriangles)for(var t=0;t<s.length;t++){var o="rgba(".concat(t/10,", ").concat(t/5,", ").concat(t,", 1)");d.update(s[t],o)}if(e.showSquares)for(t=0;t<s.length;t++)o="rgba(".concat(t/10,", ").concat(t/5,", ").concat(t,", 1)"),g.update(s[t],o);if(e.showLowshelf){var u=1,h=5,f=(r-s.length*u-2*h)/s.length,m=400,y=100;for(n.save(),n.fillStyle="rgba(227, 174, 50,0.50)",n.strokeStyle="rgba(0,0,0,0.50)",t=0;t<s.length;t++)n.fillRect(h+t*(f+u),y+256-s[t],f,m),n.strokeRect(h+t*(f+u),y+256-s[t],f,m);n.restore()}if(e.showHighshelf){for(u=6,h=3,f=(r-s.length*u-2*h)/s.length,m=400,y=-600,n.save(),n.fillStyle="rgba(255,255,255,1)",n.strokeStyle="rgba(255,255,255,0.50)",t=0;t<s.length;t++)n.fillRect(h+t*(f+u),y+256-s[t],f,m),n.strokeRect(h+t*(f+u),y+256-s[t],f,m);n.restore()}if(e.showBars){for(u=4,h=5,f=(r-s.length*u-2*h)/s.length,m=200,y=100,n.save(),n.fillStyle="rgba(255,255,255,0.50)",n.strokeStyle="rgba(0,0,0,0.50)",t=0;t<s.length;t++)n.fillRect(h+t*(f+u),y+256-s[t],f,m),n.strokeRect(h+t*(f+u),y+256-s[t],f,m);n.restore()}if(e.showCircles){var w=c/4;for(n.save(),n.globalAlpha=.5,t=0;t<s.length;t++){var S=s[t]/255,v=S*w;n.beginPath(),n.fillStyle=i.makeColor(255,111,111,.34-S/3),n.arc(r/2,c/2,v,0,2*Math.PI,!1),n.fill(),n.closePath(),n.beginPath(),n.fillStyle=i.makeColor(0,0,255,.1-S/10),n.arc(r/2,c/2,1.5*v,0,2*Math.PI,!1),n.fill(),n.closePath(),n.beginPath(),n.fillStyle=i.makeColor(200,200,0,.5-S/5),n.arc(r/2,c/2,.5*v,0,2*Math.PI,!1),n.fill(),n.closePath(),n.restore()}n.restore()}var p=n.getImageData(0,0,r,c),b=p.data,q=b.length,k=p.width;if(e.showEmboss)for(t=0;t<q;t++)t%4!=3&&(b[t]=127+2*b[t]-b[t+4]-b[t+4*k]);for(t=0;t<q;t+=4)if(e.showNoise&&Math.random()<.05&&(b[t]=b[t+1]=b[t+2]=0,b[t]=255,b[t+1]=255,b[t+2]=205),e.showInvert){var C=b[t],T=b[t+1],F=b[t+2];b[t]=255-C,b[t+1]=255-T,b[t+2]=255-F}n.putImageData(p,0,0)}},185:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.goFullscreen=t.getLinearGradient=t.getRandomColor=t.makeColor=void 0,t.makeColor=function(e,t,o,n){return void 0===n&&(n=1),"rgba(".concat(e,",").concat(t,",").concat(o,",").concat(n,")")},t.getRandomColor=function(){var e=function(){return 35,220,185*Math.random()+35};return"rgba(".concat(e(),",").concat(e(),",").concat(e(),",1)")},t.getLinearGradient=function(e,t,o,n,r,c){for(var l=e.createLinearGradient(t,o,n,r),a=0,s=c;a<s.length;a++){var i=s[a];l.addColorStop(i.percent,i.color)}return l},t.goFullscreen=function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullscreen?e.mozRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}}},h={};function d(e){var t=h[e];if(void 0!==t)return t.exports;var o=h[e]={exports:{}};return u[e](o,o.exports,d),o.exports}n=d(938),r=d(250),c=d(185),l={showGradient:null,showBars:null,showCircles:null,showTriangles:null,showSquares:null,showNoise:null,showInvert:null,showEmboss:null,showLowshelf:null,showHighshelf:null,selectFrequency:null},a=function(n){var r=new XMLHttpRequest;r.onload=function(c){console.log("In onload - HTTP Status Code = ".concat(c.target.status));var a=JSON.parse(r.responseText);e=a["Track Locations"],a.Tracks,a["Params Truth Table"].forEach((function(e){var t=e.split(":"),o=t[0],n=t[1],r=o.trim(),c=n.trim();l[r]="true"===c||"false"===c?"true"===c:c})),t=a["Starting Visualizer State"],o=a.Title,document.querySelector("#cb-noise").checked=l.showNoise,document.querySelector("#cb-bars").checked=l.showBars,document.querySelector("#cb-circles").checked=l.showCircles,document.querySelector("#cb-triangles").checked=l.showTriangles,document.querySelector("#cb-squares").checked=l.showSquares,document.querySelector("#cb-gradient").checked=l.showGradient,document.querySelector("#cb-invert").checked=l.showInvert,document.querySelector("#cb-emboss").checked=l.showEmboss,document.querySelector("#cb-lowshelf").checked=l.showLowshelf,document.querySelector("#cb-highshelf").checked=l.showHighshelf,n()},r.onerror=function(e){return console.log("In onerror - HTTP Status Code = ".concat(e.target.status))},r.open("GET","data/av-data.json"),r.send()},s=function(e){document.querySelector("#fs-button").onclick=function(t){console.log("goFullscreen() called"),c.goFullscreen(e)};var t=document.querySelector("#play-button");t.onclick=function(e){"suspended"==n.audioCtx.state&&n.audioCtx.resume(),console.log("audioCtx.state after = ".concat(n.audioCtx.state)),"no"==t.dataset.playing?(n.playCurrentSound(),t.dataset.playing="yes"):(n.pauseCurrentSound(),t.dataset.playing="no")};var o=document.querySelector("#volume-slider"),r=document.querySelector("#volume-label");o.oninput=function(e){n.setVolume(Number(e.target.value)),r.innerHTML=Math.round(Number(e.target.value)/2*100).toString()},o.dispatchEvent(new Event("input")),document.querySelector("#track-select").onchange=function(e){n.loadSoundFile(e.target.value),"yes"==t.dataset.playing&&t.dispatchEvent(new MouseEvent("click"))},document.querySelector("#visualizer-select").onchange=function(e){l.selectFrequency=!l.selectFrequency},document.querySelector("#cb-bars").onclick=function(e){l.showBars=e.target.checked},document.querySelector("#cb-circles").onclick=function(e){l.showCircles=e.target.checked},document.querySelector("#cb-triangles").onclick=function(e){l.showTriangles=e.target.checked},document.querySelector("#cb-squares").onclick=function(e){l.showSquares=e.target.checked},document.querySelector("#cb-gradient").onclick=function(e){l.showGradient=e.target.checked},document.querySelector("#cb-noise").onclick=function(e){l.showNoise=e.target.checked},document.querySelector("#cb-emboss").onclick=function(e){l.showEmboss=e.target.checked},document.querySelector("#cb-invert").onclick=function(e){l.showInvert=e.target.checked},document.querySelector("#cb-lowshelf").onclick=function(e){l.showLowshelf=e.target.checked,n.toggleLowshelf(l.showLowshelf)},document.querySelector("#cb-highshelf").onclick=function(e){l.showHighshelf=e.target.checked,n.toggleHighshelf(l.showHighshelf)}},i=function(){setTimeout(i),r.draw(l)},console.log("init called"),console.log("Testing utils.getRandomColor() import: ".concat(c.getRandomColor())),a((function(){n.setupWebaudio(e[0]);var c=document.querySelector("canvas");s(c),r.setupCanvas(c,n.analyserNode),document.querySelector("#track-select").value=e[0],document.querySelector("#visualizer-select").value=t,document.querySelector("title").textContent=o,i()}))})();
//# sourceMappingURL=bundle.js.map